# L3 Data
# Part of Home Lab Topology v4.0.0
# Data layer: logical storage pools, OS-level disk mappings, data assets (no references upward)
# Edit this file then regenerate: python3 topology-tools/regenerate-all.py

partitions:
- id: part-gamayun-ssd-1
  media_attachment_ref: attach-gamayun-slot-sata-0
  number: 1
  type: efi
  size: 0.5
  description: EFI system partition on Gamayun SSD
- id: part-gamayun-ssd-2
  media_attachment_ref: attach-gamayun-slot-sata-0
  number: 2
  type: swap
  size: 2
  description: Swap partition on Gamayun SSD
- id: part-gamayun-ssd-3
  media_attachment_ref: attach-gamayun-slot-sata-0
  number: 3
  type: lvm-pv
  size: remaining
  description: LVM physical volume for Proxmox VG
- id: part-gamayun-hdd-1
  media_attachment_ref: attach-gamayun-slot-sata-1
  number: 1
  type: ext4
  size: remaining
  description: Primary data partition on Gamayun HDD

volume_groups:
- id: vg-pve
  name: pve
  type: lvm
  pv_refs:
  - part-gamayun-ssd-3
  description: Proxmox default volume group

logical_volumes:
- id: lv-pve-root
  name: root
  type: thick
  vg_ref: vg-pve
  size_gb: 58
  description: Proxmox host root logical volume
- id: lv-pve-data
  name: data
  type: thin-pool
  vg_ref: vg-pve
  description: Proxmox thin pool for VM and LXC disks

filesystems:
- id: fs-pve-root
  type: ext4
  lv_ref: lv-pve-root
  description: Root filesystem for Proxmox host
- id: fs-gamayun-hdd
  type: ext4
  partition_ref: part-gamayun-hdd-1
  description: Filesystem mounted at /mnt/hdd

mount_points:
- id: mnt-gamayun-root
  path: /
  filesystem_ref: fs-pve-root
  device_ref: gamayun
  description: Root mount on Proxmox host
- id: mnt-gamayun-hdd
  path: /mnt/hdd
  filesystem_ref: fs-gamayun-hdd
  device_ref: gamayun
  description: HDD data mount on Proxmox host

storage_endpoints:
- id: se-local
  name: local
  platform: proxmox
  type: dir
  mount_point_ref: mnt-gamayun-root
  path: /var/lib/vz
  content:
  - vztmpl
  - iso
  - backup
  shared: false
  description: Local directory storage on SSD
- id: se-lvm
  name: local-lvm
  platform: proxmox
  type: lvmthin
  lv_ref: lv-pve-data
  content:
  - images
  - rootdir
  shared: false
  description: SSD 180GB - Production VMs and LXC thin pool
- id: se-hdd
  name: local-hdd
  platform: proxmox
  type: dir
  mount_point_ref: mnt-gamayun-hdd
  path: /mnt/hdd
  content:
  - backup
  - iso
  - vztmpl
  - snippets
  shared: false
  description: HDD 500GB - Backups, ISOs, Templates
data_assets:
- id: data-mikrotik-config
  name: MikroTik RouterOS Config
  type: config-export
  device_ref: mikrotik-chateau
  description: RouterOS configuration exports
- id: data-postgresql-db
  name: PostgreSQL Data
  type: database
  device_ref: gamayun
  description: Primary PostgreSQL data (LXC rootfs)
- id: data-redis-db
  name: Redis Data
  type: cache
  device_ref: gamayun
  description: Redis data (LXC rootfs)
- id: data-postgresql-dumps
  name: PostgreSQL Dumps
  type: backup-artifact
  device_ref: gamayun
  description: pg_dump artifacts
- id: data-nextcloud
  name: Nextcloud Data
  type: volume
  device_ref: orangepi5
  description: Nextcloud data and config
- id: data-jellyfin-config
  name: Jellyfin Config
  type: volume
  device_ref: orangepi5
  description: Jellyfin configuration
- id: data-grafana
  name: Grafana Data
  type: volume
  device_ref: orangepi5
  description: Grafana data
- id: data-prometheus
  name: Prometheus Data
  type: volume
  device_ref: orangepi5
  description: Prometheus TSDB
- id: data-homeassistant
  name: Home Assistant Data
  type: volume
  device_ref: orangepi5
  description: Home Assistant config
