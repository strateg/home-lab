# Storage Configuration
# Part of Home Lab Topology v2.1.0
# This file is part of the modular topology structure
# Edit this file and regenerate topology.yaml with: python3 scripts/merge-topology.py

  - id: storage-local
    name: "local"
    type: "dir"
    path: "/var/lib/vz"
    content: ["vztmpl", "iso", "backup"]
    device_ref: gamayun
    disk_ref: disk-ssd-system
    shared: false
    maxfiles: 0
    description: "Local directory storage on SSD"

  - id: storage-lvm
    name: "local-lvm"
    type: "lvmthin"
    vgname: "pve"
    thinpool: "data"
    content: ["images", "rootdir"]
    device_ref: gamayun
    disk_ref: disk-ssd-system
    shared: false
    description: "SSD 180GB - Production VMs and LXC thin pool"

  - id: storage-hdd
    name: "local-hdd"
    type: "dir"
    path: "/mnt/hdd"
    content: ["backup", "iso", "vztmpl", "snippets"]
    device_ref: gamayun
    disk_ref: disk-hdd-data
    shared: false
    maxfiles: 0
    prune_backups:
      keep_last: 3
      keep_daily: 7
      keep_weekly: 4
      keep_monthly: 6
      keep_yearly: 1
    description: "HDD 500GB - Backups, ISOs, Templates"

  # OPTIONAL: NFS Storage for shared templates/backups
  # Uncomment to enable NFS storage (requires NAS server)
  # - id: storage-nfs
  #   name: "nfs-shared"
  #   type: "nfs"
  #   server: "192.168.1.100"  # NAS IP address
  #   export: "/mnt/pool/proxmox"  # NFS export path
  #   content: ["backup", "iso", "vztmpl"]
  #   device_ref: gamayun
  #   shared: true
  #   maxfiles: 0
  #   description: "NFS shared storage from TrueNAS"

# ============================================================
# Services (with ID references, not hardcoded IPs)
# ============================================================

